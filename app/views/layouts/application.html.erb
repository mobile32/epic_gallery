<!DOCTYPE html>
<html>
<head>
  <title>EpicGallery</title>
  <%= csrf_meta_tags %>

  <%= stylesheet_pack_tag 'application', 'data-turbolinks-track': 'reload', media: 'all' %>
  <%= javascript_pack_tag 'application', 'data-turbolinks-track': 'reload' %>
</head>

<body>

<nav class='navbar navbar-expand-md navbar-dark bg-dark'>
  <a class='navbar-brand' href='#'>Epic Gallery</a>

  <button class='navbar-toggler'
          type='button'
          data-toggle='collapse'
          data-target='#navbarNav'
          aria-controls='navbarNav'
          aria-expanded='false'
          aria-label='Toggle navigation'>
    <span class='navbar-toggler-icon'></span>
  </button>

  <div class='collapse navbar-collapse' id='navbarNav'>
    <% if current_user && current_user.admin? %>
      <ul class='navbar-nav mr-auto'>
        <li class='nav-item dropdown'>
          <a class='nav-link dropdown-toggle' href='#' id='navbarDropdown' role='button' data-toggle='dropdown' aria-haspopup='true' aria-expanded='false'>
            Admin Tools
          </a>
          <div class='dropdown-menu' aria-labelledby='navbarDropdown'>
            <%= link_to 'Users list', admin_panel_users_path, class: 'dropdown-item' %>
          </div>
        </li>
      </ul>
    <% end %>

    <ul class='navbar-nav ml-auto'>
      <% if user_signed_in? %>
        <li class='navbar-text'>
          Hello <%= full_name(current_user) %>! |
        </li>
        <li>
          <%= link_to('Edit account', edit_user_registration_path, class: 'nav-link') %>
        </li>
        <li class='nav-item'>
          <%= link_to('Log out', destroy_user_session_path, method: :delete, class: 'nav-link') %>
        </li>
      <% else %>
        <li class='nav-item'>
          <%= link_to 'Log in', new_user_session_path, class: 'nav-link' %>
        </li>
        <li class='nav-item'>
          <%= link_to 'Sign up', new_user_registration_path, class: 'nav-link' %>
        </li>
      <% end %>
    </ul>
  </div>
</nav>

<% flash.each do |key, value| %>
  <div class='alert alert-<%= key %>'><%= value %></div>
<% end %>

<div class='container'>
  <%= yield %>
</div>

<div class='alert alert-info'>
  <%= debug(params) if Rails.env.development? %>
</div>

</body>
</html>
